(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15eb7cd6"],{b0c0:function(t,e,c){var l=c("83ab"),a=c("9bf2").f,n=Function.prototype,r=n.toString,d=/^\s*function ([^ (]*)/,o="name";l&&!(o in n)&&a(n,o,{configurable:!0,get:function(){try{return r.call(this).match(d)[1]}catch(t){return""}}})},b331:function(t,e,c){"use strict";c.r(e);var l=c("7a23"),a={class:"container"},n={class:"row"},r=Object(l["h"])("div",{class:"col-12 text-center py-4"},[Object(l["h"])("h2",null,[Object(l["h"])("strong",{class:"back_title display-3"},"訂單管理")])],-1),d={class:"col-12 d-flex justify-content-between flex-row-reverse py-3"},o={class:"col-12"},b={class:"table table-hover align-middle text-center back_table"},i=Object(l["h"])("thead",null,[Object(l["h"])("tr",null,[Object(l["h"])("th",{width:"15%"},"購買時間"),Object(l["h"])("th",{width:"40%"},"購買款項"),Object(l["h"])("th",{width:"15%"},"應付金額"),Object(l["h"])("th",{width:"15%"},"是否付款"),Object(l["h"])("th",{width:"15%"},"編輯")])],-1),s={class:"list-unstyled"},O={key:0,class:"text-success"},h={key:1,class:"text-muted"},u=["onClick"],j=["onClick"];function p(t,e,c,p,m,f){var g=Object(l["H"])("Loading"),y=Object(l["H"])("OrderModal"),v=Object(l["H"])("DelModal"),k=Object(l["H"])("Pagination");return Object(l["A"])(),Object(l["g"])(l["a"],null,[Object(l["k"])(g,{active:m.isLoading},null,8,["active"]),Object(l["h"])("div",a,[Object(l["h"])("div",n,[r,Object(l["h"])("div",d,[Object(l["h"])("button",{type:"button",class:"main_btn px-3 py-2 fs-6",onClick:e[0]||(e[0]=function(e){return f.openDelModal(!0,t.item)})},"清除所有訂單")]),Object(l["h"])("div",o,[Object(l["h"])("table",b,[i,Object(l["h"])("tbody",null,[(Object(l["A"])(!0),Object(l["g"])(l["a"],null,Object(l["F"])(m.orders,(function(e){return Object(l["A"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("td",null,Object(l["K"])(t.$filters.date(e.paid_date)),1),Object(l["h"])("td",null,[Object(l["h"])("ul",s,[(Object(l["A"])(!0),Object(l["g"])(l["a"],null,Object(l["F"])(e.products,(function(t,e){return Object(l["A"])(),Object(l["g"])("li",{key:e},Object(l["K"])(t.product.title)+" / "+Object(l["K"])(t.qty)+" "+Object(l["K"])(t.product.unit),1)})),128))])]),Object(l["h"])("td",null,Object(l["K"])(t.$filters.currency(e.total))+" 元",1),Object(l["h"])("td",null,[e.is_paid?(Object(l["A"])(),Object(l["g"])("span",O,"已付款")):(Object(l["A"])(),Object(l["g"])("span",h,"未付款"))]),Object(l["h"])("td",null,[Object(l["h"])("button",{type:"button",class:"btn btn-outline-primary",onClick:function(t){return f.openOrderModal(e)}},"詳細",8,u),Object(l["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:function(t){return f.openDelModal(!1,e)}},"刪除",8,j)])])})),128))])])])])]),Object(l["k"])(y,{ref:"orderModal",order:m.tempOrder,onUpdateOrder:f.updateOrder},null,8,["order","onUpdateOrder"]),Object(l["k"])(v,{ref:"delModal",item:m.tempOrder,onDelItem:f.delOrder},{modalCategory:Object(l["S"])((function(){return[Object(l["j"])(Object(l["K"])(m.modalCategory),1)]})),_:1},8,["item","onDelItem"]),Object(l["k"])(k,{pages:m.pagination,onChangePage:f.getOrders},null,8,["pages","onChangePage"])],64)}var m=c("5530"),f=(c("99af"),c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),g={class:"modal-dialog modal-xl",role:"document"},y={class:"modal-content border-0"},v=Object(l["h"])("div",{class:"modal-header back_modal_header"},[Object(l["h"])("h5",{class:"modal-title fw-bold",id:"exampleModalLabel"},[Object(l["h"])("span",null,"訂單細節")]),Object(l["h"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),k={class:"modal-body"},M={class:"row"},w={class:"col-md-4"},x=Object(l["h"])("h3",null,"用戶資料",-1),A={class:"table"},K={key:0},$=Object(l["h"])("th",{style:{width:"100px"}},"姓名",-1),C=Object(l["h"])("th",null,"Email",-1),_=Object(l["h"])("th",null,"電話",-1),D=Object(l["h"])("th",null,"地址",-1),L={class:"col-md-8"},P=Object(l["h"])("h3",null,"訂單細節",-1),F={class:"table"},H=Object(l["h"])("th",{style:{width:"100px"}},"訂單編號",-1),S=Object(l["h"])("th",null,"下單時間",-1),q=Object(l["h"])("th",null,"付款時間",-1),I={key:0},J={key:1},U=Object(l["h"])("th",null,"付款狀態",-1),E={key:0,class:"text-success"},z={key:1,class:"text-muted"},B=Object(l["h"])("th",null,"總金額",-1),G=Object(l["h"])("h3",null,"選購商品",-1),N={class:"table"},Q=Object(l["h"])("thead",null,[Object(l["h"])("tr")],-1),R={class:"text-end"},T={class:"modal-footer"},V=Object(l["h"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消",-1);function W(t,e,c,a,n,r){return Object(l["A"])(),Object(l["g"])("div",f,[Object(l["h"])("div",g,[Object(l["h"])("div",y,[v,Object(l["h"])("div",k,[Object(l["h"])("div",M,[Object(l["h"])("div",w,[x,Object(l["h"])("table",A,[n.tempOrder.user?(Object(l["A"])(),Object(l["g"])("tbody",K,[Object(l["h"])("tr",null,[$,Object(l["h"])("td",null,Object(l["K"])(n.tempOrder.user.name),1)]),Object(l["h"])("tr",null,[C,Object(l["h"])("td",null,Object(l["K"])(n.tempOrder.user.email),1)]),Object(l["h"])("tr",null,[_,Object(l["h"])("td",null,Object(l["K"])(n.tempOrder.user.tel),1)]),Object(l["h"])("tr",null,[D,Object(l["h"])("td",null,Object(l["K"])(n.tempOrder.user.address),1)])])):Object(l["f"])("",!0)])]),Object(l["h"])("div",L,[P,Object(l["h"])("table",F,[Object(l["h"])("tbody",null,[Object(l["h"])("tr",null,[H,Object(l["h"])("td",null,Object(l["K"])(n.tempOrder.id),1)]),Object(l["h"])("tr",null,[S,Object(l["h"])("td",null,Object(l["K"])(t.$filters.date(n.tempOrder.create_at)),1)]),Object(l["h"])("tr",null,[q,Object(l["h"])("td",null,[n.tempOrder.paid_date?(Object(l["A"])(),Object(l["g"])("span",I,Object(l["K"])(t.$filters.date(n.tempOrder.paid_date)),1)):(Object(l["A"])(),Object(l["g"])("span",J,"時間不正確"))])]),Object(l["h"])("tr",null,[U,Object(l["h"])("td",null,[n.tempOrder.is_paid?(Object(l["A"])(),Object(l["g"])("strong",E,"已付款")):(Object(l["A"])(),Object(l["g"])("span",z,"尚未付款"))])]),Object(l["h"])("tr",null,[B,Object(l["h"])("td",null,Object(l["K"])(t.$filters.currency(n.tempOrder.total)),1)])])]),G,Object(l["h"])("table",N,[Q,Object(l["h"])("tbody",null,[(Object(l["A"])(!0),Object(l["g"])(l["a"],null,Object(l["F"])(n.tempOrder.products,(function(e){return Object(l["A"])(),Object(l["g"])("tr",{key:e.id},[Object(l["h"])("th",null,Object(l["K"])(e.product.title),1),Object(l["h"])("td",null,Object(l["K"])(e.qty)+" / "+Object(l["K"])(e.product.unit),1),Object(l["h"])("td",R,Object(l["K"])(t.$filters.currency(e.final_total)),1)])})),128))])])])])]),Object(l["h"])("div",T,[V,Object(l["h"])("button",{type:"button",class:"btn main_btn",onClick:e[0]||(e[0]=function(e){return t.$emit("update-order",n.tempOrder)})},"確認")])])])],512)}var X=c("b25a"),Y={data:function(){return{sataus:{},tempOrder:{},isPaid:!1}},props:{order:{type:Object,default:function(){return{}}}},emits:["update-order"],mixins:[X["a"]],watch:{order:function(){this.tempOrder=this.order}}};Y.render=W;var Z=Y,tt=c("4186"),et=c("cf38"),ct={data:function(){return{orders:[],isAll:!1,tempOrder:{},modalCategory:"",pagination:{},isLoading:!1}},components:{OrderModal:Z,DelModal:tt["a"],Pagination:et["a"]},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason-api","/admin/orders?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.isLoading=!1,t.orders=e.data.orders,t.pagination=e.data.pagination}))},openOrderModal:function(t){this.tempOrder=Object(m["a"])({},t),this.$refs.orderModal.showModal()},updateOrder:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason-api","/admin/order/").concat(t.id);this.$http.put(c,{data:t}).then((function(t){e.$refs.orderModal.hideModal(),e.getOrders()}))},openDelModal:function(t,e){this.isAll=t,t?this.modalCategory="刪除所有訂單":(this.tempOrder=Object(m["a"])({},e),this.modalCategory="刪除訂單"),this.$refs.delModal.showModal()},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason-api","/admin/orders/all"),c="刪除所有訂單";this.isAll||(e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("jason-api","/admin/order/").concat(this.tempOrder.id),c="刪除訂單"),this.$http.delete(e).then((function(e){t.$refs.delModal.hideModal(),t.$MessageState(e,c),t.getOrders()}))}},created:function(){this.getOrders()}};ct.render=p;e["default"]=ct}}]);
//# sourceMappingURL=chunk-15eb7cd6.85bfa0db.js.map